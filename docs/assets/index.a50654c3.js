import{V as k,a as h,b as d}from"./vendor.065f4d03.js";const M=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const _ of o.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&a(_)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}};M();var S=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"day"},[r("div",{staticClass:"temperatureWrap"},[r("h3",{staticClass:"cityName"},[e._v(e._s(e.cityName))]),r("img",{staticClass:"icon",attrs:{src:e.weather.icon,alt:"\u041F\u043E\u0433\u043E\u0434\u0430"}}),r("h2",{staticClass:"temperature"},[e._v(e._s(e.weather.temperature))]),r("h5",{staticClass:"feelsLike"},[e._v(e._s(e.weather.feelsLike))])]),r("div",{staticClass:"conditionsWrap"},[r("h4",{staticClass:"description"},[e._v(e._s(e.weather.description))]),r("h5",{staticClass:"conditions"},[e._v(e._s(e.weather.conditions))])])])},A=[];function c(e,t,r,a,s,o,_,u){var n=typeof e=="function"?e.options:e;t&&(n.render=t,n.staticRenderFns=r,n._compiled=!0),a&&(n.functional=!0),o&&(n._scopeId="data-v-"+o);var i;if(_?(i=function(l){l=l||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!l&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(l=__VUE_SSR_CONTEXT__),s&&s.call(this,l),l&&l._registeredComponents&&l._registeredComponents.add(_)},n._ssrRegister=i):s&&(i=u?function(){s.call(this,(n.functional?this.parent:this).$root.$options.shadowRoot)}:s),i)if(n.functional){n._injectStyles=i;var N=n.render;n.render=function(W,m){return i.call(m),N(W,m)}}else{var p=n.beforeCreate;n.beforeCreate=p?[].concat(p,i):[i]}return{exports:e,options:n}}const q={name:"WeatherForecastToday",props:{cityName:{type:String,required:!0},weather:{type:Object,required:!0}}},f={};var L=c(q,S,A,!1,T,"840d3816",null,null);function T(e){for(let t in f)this[t]=f[t]}var D=function(){return L.exports}(),O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"chart"},[r("vue-apex-charts",{attrs:{options:e.chartOptions,series:e.series,height:"80",type:"area"}})],1)},R=[];const B={name:"WeatherForecastChart",components:{VueApexCharts:k},props:{temps:{type:Array,required:!0},temperatureColor:{type:String,required:!0}},data(){return{chartOptions:{annotations:{position:"back"},chart:{selection:{enabled:!1},zoom:{enabled:!1},toolbar:{show:!1},sparkline:{enabled:!1}},tooltip:{enabled:!1},colors:[this.temperatureColor],dataLabels:{enabled:!1},stroke:{show:!1,curve:"straight",colors:["transparent"]},grid:{show:!1},legend:{show:!1},markers:{size:0,hover:{size:0}},plotOptions:{area:{fillTo:"origin"}},fill:{type:"solid"},xaxis:{type:"numeric",labels:{show:!1,style:{colors:"transparent"}},axisBorder:{show:!1},axisTicks:{show:!1},title:{style:{color:"transparent"}},crosshairs:{show:!1},tooltip:{enabled:!1}},yaxis:{show:!1,labels:{show:!1,style:{colors:"transparent"}},axisBorder:{show:!1},axisTicks:{show:!1},title:{style:{color:"transparent"}},crosshairs:{show:!1},tooltip:{enabled:!1}}}}},computed:{series(){const e=[{name:"",data:[]},{name:"",data:[]}];let t=200,r=-200;this.$props.temps.forEach(s=>{t>s.max&&(t=s.max),r<s.min&&(r=s.min)}),t<0?t=Math.abs(t):t=0,r<0&&(r=0);let a=0;return this.$props.temps.forEach(s=>{e[0].data.push({x:a,y:s.max+=t}),e[1].data.push({x:a,y:s.min-=r}),a++}),e}}},v={};var j=c(B,O,R,!1,I,"6a64659a",null,null);function I(e){for(let t in v)this[t]=v[t]}var V=function(){return j.exports}(),z=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"week"},[r("div",{staticClass:"days"},e._l(e.weather,function(a,s){return r("div",{key:s,staticClass:"daysItem"},[e._v(" "+e._s(a.weekDayNaming)+" "),r("br"),e._v(" "+e._s(a.date)+" "),r("img",{attrs:{src:a.icon,alt:"\u0418\u043A\u043E\u043D\u043A\u0430 \u043F\u043E\u0433\u043E\u0434\u044B"}})])}),0),r("div",{staticClass:"graph"},[r("div",{staticClass:"graphMax"},e._l(e.weather,function(a,s){return r("div",{key:a.max+""+s,staticClass:"graphMax__item"},[e._v(" "+e._s(a.max)+"\xB0 ")])}),0),r("weather-forecast-chart",{attrs:{"temperature-color":e.temperatureColor,temps:e.weather}}),r("div",{staticClass:"graphMin"},e._l(e.weather,function(a,s){return r("div",{key:a.min+""+s,staticClass:"graphMin__item"},[e._v(" "+e._s(a.min)+"\xB0 ")])}),0)],1)])},P=[];const U={name:"WeatherForecastWeek",components:{WeatherForecastChart:V},props:{weather:{type:Array,required:!0}},computed:{temperatureColor(){const e="#fb8e00",t="#00cdfb";return this.weather.averageTemperature>0?e:t}}},g={};var J=c(U,z,P,!1,X,"044af308",null,null);function X(e){for(let t in g)this[t]=g[t]}var H=function(){return J.exports}(),K=function(){var e=this,t=e.$createElement;return e._self._c,e._m(0)},G=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"loading"},[r("div",{staticClass:"circle"})])}];const Q={name:"WeatherForecastLoading"},y={};var Y=c(Q,K,G,!1,Z,"427eb502",null,null);function Z(e){for(let t in y)this[t]=y[t]}var ee=function(){return Y.exports}(),te="/assets/search.62245339.svg",re=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("form",{attrs:{autocomplete:"off"},on:{submit:function(a){return a.preventDefault(),e.load.apply(null,arguments)}}},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.city,expression:"city",modifiers:{trim:!0}}],staticClass:"inputCity",class:{error:e.isErrorClass},attrs:{placeholder:e.placeholder,name:"inputCity",type:"text"},domProps:{value:e.city},on:{input:function(a){a.target.composing||(e.city=a.target.value.trim())},blur:function(a){return e.$forceUpdate()}}}),e._m(0)])])},se=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("button",{staticClass:"search",attrs:{type:"submit"}},[e._v(" \u041F\u043E\u0438\u0441\u043A "),r("img",{staticClass:"search__img",attrs:{alt:"\u041F\u043E\u0438\u0441\u043A",src:te}})])}];const ae={name:"WeatherForecastLoadForm",props:{loadByCityName:{type:Function,required:!0},geoAccessError:{type:Boolean,required:!0},cityExistError:{type:Boolean,required:!0},searchesAmount:{type:Number,required:!0}},data(){return{city:"",emptyNameError:!1}},computed:{placeholder(){return(this.cityExistError||this.emptyNameError)&&this.searchesAmount>0?"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0439 \u0433\u043E\u0440\u043E\u0434":"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0433\u043E\u0440\u043E\u0434"},isErrorClass(){return(this.cityExistError||this.emptyNameError)&&this.searchesAmount>0}},watch:{city(){this.city=this.city.replace(/[^a-zа-яё\s-]/gi,"")},geoAccessError(){this.geoAccessError}},methods:{load(){this.city!==""?(this.emptyNameError=!1,this.loadByCityName(this.city),this.city=""):this.emptyNameError=!0}}},x={};var oe=c(ae,re,se,!1,ne,"b4145d26",null,null);function ne(e){for(let t in x)this[t]=x[t]}var ie=function(){return oe.exports}(),ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._v(e._s(e.errorText))])},le=[];const _e={name:"WeatherForecastError",props:{geoExistError:{type:Boolean,required:!0},geoAccessError:{type:Boolean,required:!0},cityExistError:{type:Boolean,required:!0},searchesAmount:{type:Number,required:!0}},computed:{errorText(){return this.cityExistError&&this.searchesAmount>0?"\u0422\u0430\u043A\u043E\u0439 \u0433\u043E\u0440\u043E\u0434 \u043D\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442":this.geoExistError?"\u0423\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E \u043D\u0435 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0433\u0435\u043E\u043B\u043E\u043A\u0430\u0446\u0438\u044E":this.geoAccessError?"\u0414\u043E\u0441\u0442\u0443\u043F \u043A \u0433\u0435\u043E\u043B\u043E\u043A\u0430\u0446\u0438\u0438 \u0437\u0430\u043F\u0440\u0435\u0449\u0435\u043D":""}}},$={};var ue=c(_e,ce,le,!1,he,"641db91c",null,null);function he(e){for(let t in $)this[t]=$[t]}var de=function(){return ue.exports}(),pe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"context"}},[e.showing?r("div",{staticClass:"context",style:{left:e.x+"px",top:e.y+"px"}},e._l(e.settings,function(a){return r("button",{staticClass:"context__button",on:{click:a.action}},[e._v(" "+e._s(a.text)+" ")])}),0):e._e()])},me=[];const fe={name:"WeatherForecastSettings",props:{copyWeatherForecast:{type:Function,required:!0}},data(){return{x:0,y:0,showing:!1,settings:[{text:"\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043F\u0440\u043E\u0433\u043D\u043E\u0437",action:()=>{navigator.clipboard.writeText(this.copyWeatherForecast())}},{text:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",action:()=>{const e="Saved!",t=JSON.parse(localStorage.getItem("saved"));t?typeof t=="object"?(t.push(e),localStorage.saved=JSON.stringify(t)):(localStorage.removeItem("saved"),localStorage.saved=JSON.stringify([e])):localStorage.saved=JSON.stringify([e])}}]}},beforeCreate(){document.onclick=()=>{this.showing=!1},document.oncontextmenu=e=>{const t=e.target.classList[0],r=e.target.nodeName.toLowerCase(),a=window.innerWidth<768,s=r==="input"||r==="button"||r==="img",o=t==="loading"||t==="circle",_=t==="settings"||t==="settings__developer"||t==="settings__social",u=this.showing&&t==="context"||t==="context__button",n=e.target.className.baseVal==="apexcharts-svg"||e.target.parentNode.className==="chart",i=!!t&&typeof t=="string"&&!!(document.querySelector(".weatherForecast").querySelector("."+t)||t==="weatherForecast");return!i&&!n?!0:a||!i||u||o?!1:s||n||_?(this.showing=!1,!1):(this.setMenuCoords(e),this.showing=!0,!1)}},methods:{setMenuCoords(e){this.x=e.layerX-5,this.y=e.y-35}}},w={};var ve=c(fe,pe,me,!1,ge,"287fde94",null,null);function ge(e){for(let t in w)this[t]=w[t]}var ye=function(){return ve.exports}(),xe="/assets/vk.a65538a3.svg",$e="/assets/telegram.cab66592.svg",we="/assets/close.3dd5f019.svg",Ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"settings"},[r("button",{staticClass:"settings__close",on:{click:e.closeSettings}},[r("img",{staticClass:"settings__close__img",attrs:{alt:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438",src:we}})]),r("div",{staticClass:"settings__social"},e._l(e.links,function(a){return r("button",{key:a.href,staticClass:"settings__social__link",on:{click:a.action}},[r("img",{staticClass:"settings__social__link__img",attrs:{alt:a.alt,src:a.image}})])}),0),r("h5",{staticClass:"settings__developer"},[e._v("\u0420\u0430\u0437\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A: \u041C\u0430\u043A\u0441\u0438\u043C \u0410\u043B\u0435\u0439\u043D\u0438\u043A\u043E\u0432")])])},Ee=[];const Fe={name:"WeatherForecastSettings",props:{closeSettings:{type:Function,required:!0}},data(){return{links:[{image:xe,alt:"\u0412\u043A\u043E\u043D\u0442\u0430\u043A\u0442\u0435",action:()=>window.open("https://vk.com/yokuu","_blank")},{image:$e,alt:"\u0422\u0435\u043B\u0435\u0433\u0440\u0430\u043C",action:()=>window.open("https://t.me/yungyoku","_blank")}]}}},C={};var be=c(Fe,Ce,Ee,!1,Ne,"e6fd86e4",null,null);function Ne(e){for(let t in C)this[t]=C[t]}var We=function(){return be.exports}(),ke="/assets/settings.10a98e87.svg",Me=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"weatherForecast"},[e.loading?r("weather-forecast-loading"):e._e(),e.loading?e._e():r("div",{staticClass:"info",class:{cityError:e.cityExistError}},[e.cityExistError?r("weather-forecast-error",{staticClass:"error",attrs:{"city-exist-error":e.cityExistError,"geo-access-error":e.geoAccessError,"geo-exist-error":e.geoExistError,"searches-amount":e.searchesAmount}}):e._e(),r("weather-forecast-context",{attrs:{"copy-weather-forecast":e.copyWeatherForecast}}),r("button",{staticClass:"settings__open",on:{click:e.openSettings}},[r("img",{staticClass:"settings__open__img",attrs:{alt:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438",src:ke}})]),e.settingsShowing?r("weather-forecast-settings",{attrs:{"close-settings":e.closeSettings}}):e._e(),e.cityExistError?e._e():r("weather-forecast-today",{staticClass:"today",attrs:{"city-name":e.cityName,weather:e.current}}),e.cityExistError?e._e():r("weather-forecast-week",{staticClass:"week",attrs:{weather:e.week}}),r("weather-forecast-load-form",{staticClass:"form",attrs:{"city-exist-error":e.cityExistError,"geo-access-error":e.geoAccessError,"load-by-city-name":e.loadByCityName,"searches-amount":e.searchesAmount}})],1)],1)},Se=[];const E=["\u041F\u043D","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041F\u0442","\u0421\u0431","\u0412\u0441"],Ae=["\u042F\u043D\u0432","\u0424\u0435\u0432","\u041C\u0430\u0440","\u0410\u043F\u0440","\u041C\u0430\u044F","\u0418\u044E\u043D","\u0418\u044E\u043B","\u0410\u0432\u0433","\u0421\u0435\u043D","\u041E\u043A\u0442","\u041D\u043E\u044F","\u0414\u0435\u043A"],qe={name:"WeatherForecast",components:{WeatherForecastSettings:We,WeatherForecastContext:ye,WeatherForecastError:de,WeatherForecastLoadForm:ie,WeatherForecastLoading:ee,WeatherForecastWeek:H,WeatherForecastToday:D},data(){return{loading:!0,lang:window.navigator.language.substr(0,2),current:{},week:[],cityName:"",cityExistError:!1,geoAccessError:!1,geoExistError:!1,settingsShowing:!1,searchesAmount:0,daysInMonth:0}},created(){this.loadByCoords()},methods:{loadWeatherForecast(e,t){e&&t&&this.$http.get(`data/2.5/onecall?lat=${e}&lon=${t}&exclude=hourly,minutely,alerts&units=metric&lang=${this.lang}`).then(r=>{this.searchesAmount++,this.setCurrentWeather(r.data.current),this.setDailyWeather(r.data.daily),this.cityExistError=!1,this.loading=!1}).catch(r=>{console.error(r)})},loadCityName(e,t){e&&t&&this.$http.get(`geo/1.0/reverse?lat=${e}&lon=${t}`).then(r=>{this.cityName=r.data[0].local_names.ru}).catch(r=>{console.error(r)})},loadByCoords(){navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{const t=e.coords.latitude,r=e.coords.longitude;this.loadCityName(t,r),this.loadWeatherForecast(t,r)},()=>{this.cityExistError=!0,this.geoAccessError=!0,this.loading=!1},{enableHighAccuracy:!0}):this.geoExistError=!0},loadByCityName(e){const t=e.toLowerCase()===this.cityName.toLowerCase();t&&document.activeElement.blur(),e&&!t&&(this.loading=!0,this.$http.get(`geo/1.0/direct?q=${e}`).then(r=>{this.loadWeatherForecast(r.data[0].lat,r.data[0].lon),this.cityName=e}).catch(()=>{this.cityExistError=!0,this.cityName="",this.loading=!1}))},getMonthNaming(e){return Ae[e]},getWeekDayNaming(e){if(e===1)return"\u0421\u0435\u0433\u043E\u0434\u043D\u044F";const t=(e+new Date().getDay()-2)%E.length;return E[t]},getDate(e){return e=e+new Date().getDate(),e<=this.daysInMonth?e+" "+this.getMonthNaming(new Date().getMonth()):e%this.daysInMonth+" "+this.getMonthNaming(new Date().getMonth()+1)},setCurrentWeather(e){let t=e.weather[0].description;this.current.icon=`https://openweathermap.org/img/wn/${e.weather[0].icon}.png`,this.current.temperature=`${Math.round(e.temp)}\xB0\u0421`,this.current.feelsLike=`\u043E\u0449\u0443\u0449\u0430\u0435\u0442\u0441\u044F \u043A\u0430\u043A ${Math.round(e.feels_like)}\xB0\u0421`,this.current.description=t[0].toUpperCase()+t.slice(1),this.current.conditions=`
        \u0412\u0435\u0442\u0435\u0440: ${Math.round(e.wind_speed)} \u043C/\u0441,
        \u0414\u0430\u0432\u043B\u0435\u043D\u0438\u0435: ${Math.round(e.pressure)} \u043C\u043C \u0440\u0442. \u0441\u0442
      `},setDailyWeather(e){const t=new Date(2022,new Date().getMonth(),1),r=new Date(2022,new Date().getMonth()+1,1);this.daysInMonth=Math.round((r-t)/1e3/3600/24),e=e.map((s,o)=>({max:Math.round(s.temp.max),min:Math.round(s.temp.min),weekDayNaming:this.getWeekDayNaming(o+1),date:this.getDate(o),icon:`https://openweathermap.org/img/wn/${s.weather[0].icon}.png`}));let a=0;e.forEach(s=>a=a+s.min+s.max),e.averageTemperature=a,this.week=e},openSettings(){this.settingsShowing=!0},closeSettings(){this.settingsShowing=!1},copyWeatherForecast(){let e="";return e+="\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u0442\u0435\u043C\u043F\u0435\u0440\u0430\u0442\u0443\u0440\u0430 \u0440\u0430\u0432\u043D\u0430 "+this.current.temperature,e}}},F={};var Le=c(qe,Me,Se,!1,Te,"3f5d94ce",null,null);function Te(e){for(let t in F)this[t]=F[t]}var De=function(){return Le.exports}(),Oe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("weather-forecast")],1)},Re=[];const Be={name:"App",components:{WeatherForecast:De}},b={};var je=c(Be,Oe,Re,!1,Ie,"300190ee",null,null);function Ie(e){for(let t in b)this[t]=b[t]}var Ve=function(){return je.exports}();h.config.productionTip=!1;h.use({install(e){e.prototype.$http=d}});d.defaults.baseURL="https://api.openweathermap.org/";const ze="&appid=40d29b94156ded9cf61cbd2c85b44f5c";d.interceptors.request.use(function(e){return e.url+=ze,e},function(e){return Promise.reject(e)});new h({render:e=>e(Ve)}).$mount("#app");
